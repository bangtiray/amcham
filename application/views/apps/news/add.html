<style type="text/css">
	.myProgress {
	    position: relative;
	    width: 100%;
	    height: 30px;
	    background-color: #ababab;
	    margin-bottom: 10px;
	}
	.myBar {
	    position: absolute;
	    width: 1%;
	    height: 100%;
	    background-color: #31b0d5;
	}	
	.labelImag {
		text-align: center;
	    line-height: 30px;
	    color: white;
	}
	.btn.btn-danger {
    	margin-left: 23px;
	}
</style>
<script src="{base_url}assets/js/html5shiv.js"></script>
<script src="{base_url}assets/js/selectivizr.js"></script>
<link rel="stylesheet" type="text/css" href="{base_url}assets/css/normalize.css" />
<link rel="stylesheet" type="text/css" href="{base_url}assets/css/component.css" />
<script>(function(e,t,n){var r=e.querySelectorAll("html")[0];r.className=r.className.replace(/(^|\s)no-js(\s|$)/,"$1js$2")})(document,window,0);</script>
<script type="text/javascript">
	function progressLoad(idLang, idImag){
		var elem = document.getElementById("myBar" + idLang + idImag); 	    
	    var width = 10;
	    var id = setInterval(frame, 10);
	    function frame() {
	        if (width >= 100) {
	            clearInterval(id);
	        } else {
	        	width++; 
	    		elem.style.width = width + '%'; 
	        	document.getElementById("label" + idLang + idImag).innerHTML = width * 1 + '%';
	        }
	    }
	}
	function progressLoadAll(){
		var elem = document.getElementByClassName("myBar"); 	    
	    var width = 10;
	    var id = setInterval(frame, 10);
	    function frame() {
	        if (width >= 100) {
	            clearInterval(id);
	        } else {
	        	width++; 
	    		elem.style.width = width + '%'; 
	        	document.getElementByClassName("label").innerHTML = width * 1 + '%';
	        }
	    }
	}
</script>

<script type="text/javascript">
	function checked_check(id){
    	$('#'+id).click(function() {
    		var id_data = $(this).attr("id");    		
		    if ($(this).is(':checked')) {
		        $('#'+id_data+"checked").val(1);
		    } else {
		        $('#'+id_data+"checked").val(0);
		    };
		});
    }
</script>

<h1 class="page-header">{page_name}</h1>
<div class="row">
	<!-- begin col-12 -->
	 <div class="col-md-12">
		<!-- begin panel -->
		<div class="panel panel-inverse" data-sortable-id="index-1">
			<div class="panel-heading">
			    <div class="panel-heading-btn">
				<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i class="fa fa-expand"></i></a>
				<a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i class="fa fa-minus"></i></a>
			    </div>
			    <h4 class="panel-title">{judul} News</h4>
			</div>
			<div class="panel-body">
				<div class="col-sm-12 col-lg-12 col-md-12">
					<div class="row-fluid">
						<div class="col-sm-12 text-right">
							<a class="btn btn-primary insert update {disable_edit}   tangan" id='save'><i class="fa fa-save"></i> {proses}</a>
							<a class="btn btn-primary insert update {disable_edit} {edit_button} tangan" id='save_approve'><i class="fa fa-paper-plane"></i> {proses}   {next_approval}</a>
							<a class="btn btn-warning tangan" href='{this_controller}'><i class="fa fa-arrow-left"></i> Back</a>
						</div>
					</div>
					<div class="clear-fix">&nbsp;</div>
					<div class="col-sm-12 col-lg-12 col-md-12">
						<form action='{this_controller}proses/{id}' id='form1' class="form-horizontal">
							<ul class="nav nav-pills">
								<!-- {list_lang2}
								<li class="{active}"><a href="#nav-pills-tab-{nomor}" data-toggle="tab">{lang_name}</a></li>
								{/list_lang2} -->
							</ul>
							<div class="tab-content">
								{list_lang}
								<div class="tab-pane fade {active}" id="nav-pills-tab-{nomor}">
									<!-- <div class="form-group  no-margin">
										<label class="col-md-2 control-label">Not available in  {bahasa}</label>
										<div class="col-md-9"><input type="checkbox" class="lang_na" value="1" name="is_not_available[{lang_id}]" stat-grup="{grup_enable}" stat-id="{nomor}" {is_not_available}></div>
									</div> -->
									<div class="form-content">
										<div class="form-group no-margin {invis}">
											<label class="col-md-2 control-label">Category <i class='req'>*</i></label>
											<div class="col-md-9"><select id="id_news_category{nomor}" class='form-control' name="id_news_category[]" data-parsley-required="{validation}">{list_news_category}</select></div>
										</div>
										<div class="form-group  no-margin">
											<label class="col-md-2 control-label">Title<i class='req'>*</i></label>
											<div class="col-md-9"><input type="text" value="{news_title}" id="title{nomor}" class='form-control' name="news_title[]" data-parsley-required="{validation}"></div>
										</div>
										<div class="form-group  no-margin ">
											<label class="col-md-2 control-label">URL <i class='req'>*</i></label>
											<div class="col-md-9"><input type="text" value="{uri_path}" id="uri_path{nomor}" class='form-control' name="uri_path[]" data-parsley-required="{validation}"></div>
										</div>
										<div class="form-group  no-margin" id="form_thumbnail">
											<label class="col-md-2 control-label">Thumbnail Image <i class='req'>*</i></label>
											<div class="col-md-9">
												{img}
												<div style="color: green">size : 840 x 400px</div><br/>
												<a style="cursor: pointer;" onclick="delImage('{nomor}', '{base_url}')">Delete Image</a>
												<input type="hidden" name="imgDelete[]" id="imgDelete{nomor}" value="0">
											</div>
										</div>

										{images_detail}
										<div class="cloneInputdetail" id="entry2{no_img_detail}">
											<div class="form-group  no-margin invis">
												<div class="col-md-9"><input class="id_delete_img_detail" type="text" value="" class='form-control' name="id_delete_img_detail"></div>
											</div>
											<div class="form-group no-margin">
									            <label class="col-md-2 control-label">{form_images_detail_label}</label>
									            <div id="images_detail" class="col-md-9 input_images_detail">{form_images_detail}
									            <!-- <div style="color: green">size : 840 x 400px</div> -->
									            </div>
									            <label class="col-md-2 control-label"></label>
									            <div class="col-md-9">
									            	<div>
	        											<textarea placeholder="Caption" name="description_images_detail[]" class="form-control">{description_images_detail}</textarea>
	        										</div>

									            	<input type="checkbox" value="{is_share}" {is_share_checked} id="is_share{id_disclaim}" class='input_is_share '>
									            	<input type="hidden" value="{is_share}" id="is_share{id_disclaim}checked" name="is_share[]">
									            	<input type="hidden" value="{id_images_detail}" name="id_images_detail[]">
													<label> Set image for Share</label>

										        	<a class="del-img-detail {invis_del_img}" id="delete_img_detail_{no_img_detail}" data-id-img-detail="{id_images_detail}">
										        		<i class="fa fa-times-circle" title="Delete" style='font-size:20px; cursor:pointer;'></i>
				        							</a>					        						
									            </div>
									        </div>
										</div>
										<script type="text/javascript">
											checked_check("is_share{id_disclaim}");
										</script>
								        {/images_detail}

								        <span id="image_detail_form"></span>
										<div class="form-group no-margin">
											<label class="col-md-2 control-label"></label>
											<div class="col-md-9" id="buttonaddimages">
										        <button type="button" id="btnAdddetail" name="btnAdddetail" class="btn btn-primary">Add Images</button>
									        </div>
										</div>

										<div class="form-group  no-margin invis">
											<label class="col-md-2 control-label">Mailchimp</label>
											<div class="col-md-9"><input type="text" value="{mailchimp}" id="mailchimp{nomor}" class='form-control' name="mailchimp[]" ></div>
											<!-- <div class="col-md-9"><textarea name="mailchimp[]"id="mailchimp{nomor}" class="form-control">{mailchimp}</textarea></div> -->
										</div>
										<div class="form-group  no-margin invis">
											<label class="col-md-2 control-label">Year <i class='req'>*</i></label>
											<div class="col-md-9"><input type="text" value="{year}" id="year{nomor}" class='form-control' name="year[]" ></div>
										</div>
										<div class="form-group  no-margin">
											<label class="col-md-2 control-label">Link Youtube Video</label>
											<div class="col-md-9"><input type="text" value="{link_youtube_video}" id="link_youtube_video{nomor}" class='form-control' name="link_youtube_video[]"></div>
										</div>
										<div class="form-group  no-margin">
											<label class="col-md-2 control-label">&nbsp;</label>
											<div class="col-md-9"><b>Example: https://www.youtube.com/watch?v=DB6PUtcwiD0</b></div>
										</div>
									
										<div class='form-group no-margin {dsp_publish_date}'>
											<label class="col-md-2 control-label">Publish Date</label>
											<div class="col-md-9">
												<div class="input-group date datetimepicker" data-date-format="dd-mm-yyyy hh:ii">
													<input type="text" value="{publish_date2}" id="publish_date{nomor}" class='form-control' name="publish_date[]" readonly="readonly">
													<span class="input-group-addon"><i class="fa fa-calendar"></i></span>
												</div>
											</div>
										</div>
										<div class="form-group  no-margin" id="form_images_tags">
											<label class="col-md-2 control-label">Image Tags</label>
											<div class="col-md-9"><select id="tags{nomor}" multiple class='form-control' name="tags[{lang_id}][]"></select></div>
										</div>
										<div class="form-group  no-margin ">
											<label class="col-md-2 control-label">Menu Tags</label>
											<div class="col-md-9"><select id="menu_tags{nomor}" multiple class='form-control' name="menu_tags[{lang_id}][]"></select></div>
										</div>
										<div class="form-group  no-margin">
											<label class="col-md-2 control-label">Teaser </label>
											<div class="col-md-9"><textarea name="teaser[]" rows="4" id="teaser{nomor}" class="form-control" >{teaser}</textarea></div>
										</div>
										<div class="form-group  no-margin">
											<label class="col-md-2 control-label">Content<i class='req'>*</i></label>
											<div class="col-md-9"><textarea  rows="4" id="page_content{nomor}" name="page_content[]" class="form-control ckeditor"  data-parsley-required="{validation}">{page_content}</textarea></div>
											<!-- data-parsley-required="{validation}" -->
										</div>
										<div class="form-group  no-margin ">
											<label class="col-md-2 control-label">Created by alias</label>
											<div class="col-md-9"><input type="text" value="{writer}" id="writer{nomor}" class='form-control' name="writer[]" ></div>
										</div>

									    <div class="form-group  no-margin">
											<label class="col-md-2 control-label">Seo Title</label>
											<div class="col-md-9"><input type="text" value="{seo_title}" id="seo_title{nomor}" class='form-control' name="seo_title[]"></div>
										</div>
									    <div class="form-group  no-margin">
											<label class="col-md-2 control-label">Meta Description</label>
											<div class="col-md-9"><textarea  rows="4" id="meta_description{nomor}" name="meta_description[]" class="form-control ckeditor">{meta_description}</textarea></div>
										</div>
									    <br>
									    <div class="form-group  no-margin">
											<label class="col-md-2 control-label">Meta Keywords</label>
											<div class="col-md-9"><input type="text" value="{meta_keywords}" id="meta_keywords{nomor}" class='form-control' name="meta_keywords[]"></div>
										</div>
										<div class="form-group  no-margin" id="form_file">
										<label class="col-md-2 control-label" style="padding-top: 20px !important;">Upload File</label>
											{file_upload}			  
					                      <br/>
					                      <input type="checkbox" value="0" id="is_file_member{nomor}" name="is_file_member[]"> File Member
					                      <a style="cursor: pointer; padding-left: 30px;" onclick="delFile(this,'{nomor}')" class="{invis_file_tampil}">Delete File</a>
					                      <input type="hidden" name="fileDelete[]" id="fileDelete{nomor}" value="0">
					                    </div> 
					                    <div class="form-group  no-margin {invis_file_tampil}" id="fileTampil{nomor}">
					                      <label class="col-md-2 control-label"></label>
					                      <div class="col-md-9"><a href="{base_url}file_upload/{filename}">{filename}</a></div>
					                    </div>
										<!-- <div class="form-group  no-margin">
											<label class="col-md-2 control-label">Is RSS Feed</label>
											<div class="col-md-9"><input type="checkbox" value="1" name="is_rssfeed[{lang_id}]" {is_rssfeed}> Yes</div>
										</div> -->
										<div class="form-group  no-margin {enable_edit_status_publish} {invis}">
											<label class="col-md-2 control-label">Status <i class='req'>*</i></label>
											<div class="col-md-9"><select id="id_status_publish{nomor}" class='form-control' name="id_status_publish[]"  data-parsley-required="{validation}">{list_status_publish}</select></div>
										</div>
										<div class="form-group  no-margin hide">
											<div class="col-md-9"><input type="text" value="{lang_id}" id="id_lang{nomor}" class='form-control' name="id_lang[]"></div>
										</div>
										<div class="form-group  no-margin hide">
											<div class="col-md-9"><input type="text" value="{id_news}" id="id{nomor}" class='form-control' name="id_news[]"></div>
										</div>
										<div class="form-group  no-margin hide">
											<div class="col-md-9"><input type="text" value="{id_gallery}" id="id_gallery{nomor}" class='form-control' ></div>
											<!-- name="id_gallery[]" -->
										</div>
										<div class="form-group  no-margin hide ">
											<div class="col-md-9"><input type="text" value="{gallery_album}" id="gallery_album{nomor}" ></div>
										</div>
										<div id="idGallery-value" class="invis">{gallery_album}</div>
										<div class="form-group  no-margin invis" id="form_images_gallery">
											<label class="col-md-2 control-label">Gallery Images</label>
											<div class="col-md-5">
												<div class="box">
													<input type="file" name="uploadImages[]" id="uploadImages{nomor}" style="display: none;" class="inputfile inputfile-6" data-multiple-caption="{count} files selected" multiple />
													<label for="uploadImages{nomor}"><span></span> <strong><svg xmlns="http://www.w3.org/2000/svg" width="20" height="17" viewBox="0 0 20 17"><path d="M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"/></svg>Select Images</strong></label>
												</div>
												<div style="color: green">size : 847 x 476px</div><br/>
												<!-- 	<button type="button" class="open-ImagesDialog btn btn-info" data-id="{nomor}" data-toggle="modal" data-target="#myModal">Get Images from Server</button> -->
												<button type="button" class="open-ImagesDialog btn btn-info" data-id="{nomor}" id="addImagesServer">Get Images from Server</button>
											</div>

											<div class="col-md-2">
												<a class="btn btn-success removePrice" id="btnAddGallery"><b>+</b> Add From Album</a>
											</div>
											<div class="col-md-2">
												<a class="btn btn-danger removePrice" id="btnRemovewGallery"><b>x</b> Remove Selected Album</a>
											</div>
										</div>
								<div class="form-group no-margin" id="buttonImages{nomor}" style="display: {showUploadAll};">
									<div class="col-md-2"></div>
									<span class="col-md-9" style="padding-top: 10px !important;">
										<button type="button" class="btn btn-primary" onclick="saveAll('{nomor}', '{jmlImages}')">Upload & Update All</button>
										<button type="button" class="btn btn-danger" onclick="deleteAll('{nomor}', '{jmlImages}')">Delete All</button>
									</span>
								</div>
								<div class="form-group  no-margin">
									<div class="col-md-2"></div>
									<span class="col-md-9" style="padding-top: 10px !important;">
										<div id="imageSaved{nomor}">
											<!-- {list_gallery_images} -->
											{gallery_images}
										</div>
										<div id="imagePreview{nomor}"></div>
										<div id="imagePreviewAlbum">
										<div id="imageSaveAlbum">
											
										</div>


									</span>
								</div>
							</div>
							
							 <input type="hidden" id="number" value="{jmlImages}"/>
							<script>
								/**
								 *
								 * untuk file upload checkbox is_member
								 *
								 */
						    	$('#is_file_member{nomor}').click(function() {
						    		var id_data = $(this).attr("id");    		
								    if ($(this).is(':checked')) {
								        $('#'+id_data).val(1);
								    } else {
								        $('#'+id_data).val(0);
								    };
								});
								if ({is_file_member} == 1) {
									$('#is_file_member{nomor}').prop('checked', true);
									$('#is_file_member{nomor}').val(1);
								}
							</script>
								<script type="text/javascript">
								$(document).ready(function(){
									$('#title{nomor},#uri_path{nomor}').keyup(function(){
										$('#uri_path{nomor}').val(convert_to_uri($(this).val()));
									});
									$('#title{nomor},#seo_title{nomor}').keyup(function(){
										$('#seo_title{nomor}').val($(this).val());
									});
									$('#description{nomor},#meta_description{nomor}').keyup(function(){
										CKEDITOR.instances.meta_description{nomor}.setData($(this).val());
									});
								})
								$(document).ready(function(){
									$("#tags{nomor}").select2({
									  tags: [{tags}],
									  tokenSeparators: [","]
									})
									if ("{tags_data}") {
										$("#tags{nomor}").select2('val',[{tags_data}]);
										
									}

									$("#menu_tags{nomor}").select2({
										  tags: [{menu_tags}],
										  tokenSeparators: [","]
									})

									if ("{menutags_data}") {										
										$("#menu_tags{nomor}").select2('val',[{menutags_data}]);
									}

								}) 

							var inputLocalFont = document.getElementById("uploadImages{nomor}");
							inputLocalFont.addEventListener("change",previewImages,false);

							function previewImages(){
								var number_awal = $('#number').val();
				        		var number_new = parseInt(number_awal)+1;
				        		 $('#number').val(number_new);
								
								var temp_id = $('.myBar:last').attr("id");
								if (typeof temp_id !="undefined") {
									last_append = temp_id.replace("myBar0","");
								}else{
									last_append = 0;
								}

								$('#uploadImages0').on("change", function(){
								var count_files_add = $(this)[0].files.length;
								});

								var value = last_append;
								value = isNaN(value) ? 0 : value;
    							value++;

										// $('#number').val(value);
									    var fileList = this.files;
									    
									    if(fileList.length != 0){
											document.getElementById("buttonImages{nomor}").style.display = 'block';
										}
										var c = value - 1;

									    var anyWindow = window.URL || window.webkitURL;

									    	var getJml = jmlImagesSaved{nomor};
									    	var jmlImages = 0;
									    	if(getJml != 0 || getJml != ''){
									    		jmlImages = getJml;
									    	} else{
									    		jmlImages = 0;
									    	}

									        for(var i = 0; i < fileList.length; i++){
									        	//alert(fileList[i]);
									          jmlImages = c + i + parseInt($('#number').val());

									          var jmlNow = parseInt(i) + parseInt(jmlImages);
									          
									          var objectUrl = anyWindow.createObjectURL(fileList[i]);


									          if((fileList[i].type == "image/gif") || (fileList[i].type == "image/jpeg") || (fileList[i].type == "image/png") || (fileList[i].type == "image/bmp")){

									          	counter_data = $('.dataimgupload').length;
									          	
								          		$('#imagePreview{nomor}').append('<div id="imag{nomor}' + jmlImages + '" class="col-md-12" style="margin-bottom: 15px;"><div class="col-md-3"><img src="' + objectUrl + '" width="100px" /></div><div class="col-md-9"><div class="myProgress" id="myProgress"><div class="myBar" id="myBar{nomor}' + jmlNow + '"><div class="labelImag" id="label{nomor}' + jmlNow + '">0%</div></div></div><input type="text" id="nameImag{nomor}' + jmlImages + '" placeholder="Name" class="form-control" style="margin-bottom: 10px;"><textarea id="descImag{nomor}' + jmlImages + '" placeholder="Description" class="form-control" style="height: 75px;resize: none;margin-bottom: 10px;"></textarea><select id="tag-image'+jmlImages+'"  multiple class="form-control" name="tag-image[]"  style="max-width:100%;"></select><div class="clear-fix">&nbsp;</div><button type="button" class="btn btn-info dataimgupload" id="btnImag{nomor}' + jmlNow + '" onClick="saveOne({nomor}, ' + i + ', ' + jmlImages+', ' + jmlImages+')">Upload and Save</button><button type="button" class="btn btnImag-danger" style="margin-left:10px;" onClick="deleteOne({nomor}, ' + i + ', ' + jmlImages + ', 0)">Delete</button><input type="hidden" id="statusImag{nomor}' + jmlImages + '" value="0" /><input type="hidden" id="filer{nomor}' + jmlImages + '" value="0" /><input type="hidden" id="idSavedImag{nomor}' + jmlImages + '" value="" /></div></div>');
										          	//move(i, 50);

										          	var x = $("#uploadImages0"),y = x.clone();
													y.attr("id","fileOld"+jmlImages);
													y.appendTo('#imag{nomor}'+jmlImages);

												  	window.URL.revokeObjectURL(fileList[i]);
												  	saveOne({nomor}, i,jmlImages,jmlImages);
									          } else{
									          		alert("File type must be formatted as .gif, .jpg, .jpeg, .png and .bmp");
									          }

												$("#tag-image"+jmlImages).select2({
												  tags: [{tags}],
												  tokenSeparators: [","]
												})
									          
									        }
									}
								</script>
								{imagemanager_config}
								<!-- form detail -->
								{/list_lang}
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<span id="image_detail_form_template" class="invis">
	<div class="cloneInputdetail" id="entry2__NO_IMG_detail_">
		<div class="form-group no-margin">
	        <label class="col-md-2 control-label"><!-- Image Detail --></label>
	        <div id="images_detail" class="col-md-9 input_images_detail">{form_images_detail}
	        <!-- <div style="color: green">size : 850 x 480px</div> -->
	        </div>
	    </div>
	    <div class="form-group no-margin">
            <label class="col-md-2 control-label"></label>
	        <div class="col-md-9">
	        	<div>
	        		<textarea placeholder="Caption" name="description_images_detail[]" class="form-control"></textarea>
	        	</div>
	        	<input type="checkbox" value="0" id="is_share__NO_DISCLAIM_" class='input_is_share'>
	        	<input type="hidden" id="is_share__NO_DISCLAIM_checked" name="is_share[]" value="0">

	        	<label> Set image for Share</label>
				<a class="del-img-detail" id="delete_img_detail__NO_IMG_detail_" data-id-img-detail="{id_images_detail}">
					<i class="fa fa-times-circle" title="Delete" style='font-size:20px; cursor:pointer;'></i>
				</a>
			</div>
		</div>
        <!-- <a class="del-detail" id="delete_img_detail__NO_IMG_detail_">Delete</a> -->
	</div>
	<script type="text/javascript">
		checked_check("is_share__NO_DISCLAIM_");
	</script>
</span>

<div class="modal invis fade" id="popViewDetail">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
				<h4 class="modal-title">Select Gallery</h4>
			</div>
			<div class="modal-body">
				<div class="modal-body">
					<div id="view-detail"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	/* IMAGE DETAIL*/
	// multiple add 
	var numImgdetail 	= 1;
	// $('#images_detail .browse-image').attr('id', 'img_'+numImgdetail);
	$('#btnAdddetail').click(function (){
        var numImgdetail 	= $('.cloneInputdetail').length;
	        numImgdetail 	= numImgdetail+1;
        $('#image_detail_form_template .browse-image').attr('id', 'detail_img_'+numImgdetail);
        $('#image_detail_form').append($("#image_detail_form_template").html().replace(/__NO_IMG_detail_/g,numImgdetail).replace(/__NO_DISCLAIM_/g,numImgdetail)        );
        checked_check("is_share"+numImgdetail);
    });

    // multiple delete
    var idDelImgdetail 	= [];
    var numDelImgdetail 	= $('.cloneInputdetail').length;
    $(document).on('click', '.del-img-detail', function () {
    	var idDelImgdetailNew = $(this).attr('data-id-img-detail');
    	var idImgdetail = $(this).parent().parent().parent().attr('id');
        if (confirm("Are you sure you wish to remove this image? This cannot be undone.")){
        	// del image detail pertama beda dengan setelahnya karena pertama tidak bisa di hapus elementnya
        	if ( $(this).hasClass('del-img-detail-first') ) {
        		// console.log('ada')
        		$('#'+idImgdetail).find('#images_detail').find('img').attr('src','/amcham/images/article/small/no_image.png')
        		$('#'+idImgdetail).find('#images_detail').find('input').attr('value','')
        		$('#'+idImgdetail).find('textarea').val('')
        		$('#'+idImgdetail).find('input[type=checkbox]').prop('checked',false) 
        		$('#'+idImgdetail).find('input[name="is_share[]"]').val(0)

        	}else{
		    	$('#'+idImgdetail).slideUp('slow',function(){
		    		$(this).empty();
		    		numDelImgdetail = numDelImgdetail-1;
		    	});
        	}
    		idDelImgdetail.push(idDelImgdetailNew);
        }
    	$('input[name="id_delete_img_detail"]').val(idDelImgdetail);
        return false;
    	$('.image_detail_form').append($("#image_detail_form_template").html().replace(/__NO_IMG_detail_/g,numDelImgdetail));
		// console.log(idDelImgdetail);
    });
    /* IMAGE DETAIL*/

	var int_max_width_cropzoom  = max_width_cropzoom ;
	var int_max_height_cropzoom  = max_height_cropzoom ;
	
	$(document).ready(function(){
			ganti_category()

		$('#id_news_category0, #id_news_category1').change(function(event) {
			ganti_category()
		});

		function ganti_category() {
		$id_category = $('#id_news_category0').val();

		$url = '{this_controller}/compare_id';
			$.ajax({
				url: $url,
				type: 'POST',
				dataType: 'JSON',
				data: {id: $id_category},
				error       : function (e) {
					console.log('error');
				},
				success: function(data) {
				// console.log(data)
				//report		= +thumbnail -mailchimp -year +fileupload -gallery +imgdetail
				//newsletter	= -thumbnail +mailchimp -year +fileupload -gallery +imgdetail
				//networking	= +thumbnail -mailchimp -year -fileupload +gallery -imgdetail
				//us			= +thumbnail -mailchimp +year +fileupload +gallery -imgdetail
				//articles		= +thumbnail -mailchimp -year +fileupload -gallery +imgdetail
				if (data.is_publication == 1){ // publication
					formGambarHorizontal()
	      			$('#form_thumbnail').slideDown(); //thumbnail
	      			$('#mailchimp0').parent().parent().slideUp(); //mailchimp
	      			$('#year0').parent().parent().slideUp();//year
	      			$('#year0').attr('required',false);		//year
	      			$('#form_file').slideDown(); //fileupload

	      			$('#form_images_gallery').slideUp(); //gallery
			    	$('#form_images_tags').slideUp(); //gallery
			    	$('#form_images_tags').find('label').html('Image Tags'); //gallery
			    	$('#buttonImages0').slideUp(); //gallery
			    	$('.cloneInputdetail').slideUp(); //imgdetail
					$('#buttonaddimages').slideUp(); //button Add

			    	$('#page_content0').attr('data-parsley-required',false);
					$('#page_content0').parent().parent().find('label').html('Content');
			    	

				} else if (data.is_newsletter == 1){
					formGambarNormal()
					$('#form_thumbnail').slideUp(); //thumbnail
	      			$('#mailchimp0').parent().parent().slideDown(); //mailchimp
	      			$('#year0').parent().parent().slideUp();//year
	      			$('#year0').attr('required',false);		//year
	      			$('#form_file').slideDown(); //fileupload

	      			$('#form_images_gallery').slideUp(); //gallery
			    	$('#form_images_tags').slideUp(); //gallery
			    	$('#form_images_tags').find('label').html('Image Tags'); //gallery
			    	$('#buttonImages0').slideUp(); //gallery
			    	$('.cloneInputdetail').slideUp(); //imgdetail
					$('#buttonaddimages').slideUp(); //button Add^

					$('#page_content0').attr('data-parsley-required',false);
					$('#page_content0').parent().parent().find('label').html('Content');
			    	

				} else if (data.is_networking == 1){
					formGambarNormal()
					$('#form_thumbnail').slideDown(); //thumbnail
	      			$('#mailchimp0').parent().parent().slideUp(); //mailchimp
	      			$('#year0').parent().parent().slideUp();//year
	      			$('#year0').attr('required',false);		//year
	      			$('#form_file').slideUp(); //fileupload

	      			$('#form_images_gallery').slideDown(); //gallery
			    	$('#form_images_tags').slideDown(); //gallery
			    	$('#form_images_tags').find('label').html('Image Tags'); //gallery
			    	$('#buttonImages0').slideDown(); //gallery
			    	$('.cloneInputdetail').slideDown(); //imgdetail
					$('#buttonaddimages').slideDown(); //button Add^

			    	$('#page_content0').attr('data-parsley-required',false);
					$('#page_content0').parent().parent().find('label').html('Content');


				} else if (data.is_us_invesment == 1){
					formGambarHorizontal()
					$('#form_thumbnail').slideDown(); //thumbnail
	      			$('#mailchimp0').parent().parent().slideUp(); //mailchimp
	      			$('#year0').parent().parent().slideDown();//year
	      			$('#year0').attr('required',true);		//year
	      			$('#form_file').slideDown(); //fileupload

	      			$('#form_images_gallery').slideDown(); //gallery
			    	$('#form_images_tags').slideDown(); //gallery
			    	$('#buttonImages0').slideDown(); //gallery
			    	$('.cloneInputdetail').slideDown(); //imgdetail
					$('#buttonaddimages').slideDown(); //button Add^

			    	$('#page_content0').attr('data-parsley-required',false);
					$('#page_content0').parent().parent().find('label').html('Content');

			    	$('#form_images_tags').find('label').html('Image/Video Tags'); //gallery
				} else {
					formGambarNormal()
					$('#form_thumbnail').slideDown(); //thumbnail
	      			$('#mailchimp0').parent().parent().slideUp(); //mailchimp
					$('#year0').parent().parent().slideUp();//year
	      			$('#year0').attr('required',false);		//year
	      			$('#form_images_gallery').slideDown(); //gallery
			    	$('#form_images_tags').slideDown(); //gallery
			    	$('#form_images_tags').find('label').html('Image Tags'); //gallery
			    	$('#buttonImages0').slideUp(); //gallery
			    	$('.cloneInputdetail').slideDown(); //imgdetail
					$('#buttonaddimages').slideDown(); //button Add^

					$('#page_content0').attr('data-parsley-required',true);
					$('#page_content0').parent().parent().find('label').html('Content<i class="req">*</i>');
				}
		      	}
		      })
		}

	function formGambarHorizontal() {
		max_width_cropzoom  = 200;
		max_height_cropzoom = 280;
      	// $('.browse-image').first().next().next().text('size: '+max_width_cropzoom+' x '+max_height_cropzoom+'px');
	}
	function formGambarNormal() {
		max_width_cropzoom  = 450;
		max_height_cropzoom = 260;
        // $('.browse-image').next().next().text('size: '+max_width_cropzoom+' x '+max_height_cropzoom+'px');
	}

	});

</script>
<script type="text/javascript">
$(document).ready(function(){

	$(document).on('click','.input_is_share',function(e){	
		var maxCheckedImgShare = 1;

		
		countCheckedImgShare = 0;
		$('input[name="is_share[]"]').each(function(){
			if (parseInt( $(this).val() ) == 1) {
				countCheckedImgShare++;
			};
		});
	// var countCheckedImgShare = document.querySelectorAll('input[name="input_is_share[]"]:checked').length;

	if (countCheckedImgShare > maxCheckedImgShare){
		this.checked = false; 

		$(this).next().val(0);
    	e.preventDefault();
    	alert('Maximal 1 Image You Are Choosen');

	} else {
		return true;
	}

	});

});



  $(document).on('click','.select-data',function(){
    	var id_event = $("#id0").val();
    	var id = $(this).attr('data-id');
    	var t = $("#idGallery-value").text();
		if (t.indexOf(id) < 0) {
		if(t.length>0){
		 t += ",";
		}
		$("#idGallery-value").text(t + id);
		}
		var array_id = $("#idGallery-value").text();

		$.ajax({
			url         : base_url+'apps/news/show_images_AlbumGallery',
			type		: 'POST',
			data		: 'id_gallery='+id+'&id_event='+id_event+'&array_id='+array_id,
			error 		: function(err){},
			success 	: function(ret){
							$('#popViewDetail').modal('hide');
							$('#imagePreviewAlbum').append(ret);
							}
		});
  		return false;
    });

  
    $(document).on('click','#btnAddGallery', function(e){
    	// var id_gallery_Saved = $("#gallery_album0").val();
		var id = $("#idGallery-value").text();
		$.ajax({
			url         : base_url+'apps/news/getAlbumGallery',
			type		: 'POST',
			data		: 'id_gallery='+id,
			success 	: function(ret){
							$('#view-detail').html(ret);
							$('#popViewDetail').modal('show');
							}
		});

		
  		return false;
    });

    $(document).on('click','#btnRemovewGallery', function(e){
		// var id_gallery_Saved = $("#gallery_album0").val();
		var id = $("#idGallery-value").text();

		$.ajax({
			url         : base_url+'apps/news/getAlbumGalleryToRemove',
			type		: 'POST',
			data		: 'id_gallery='+id,
			success 	: function(ret){
							$('#view-detail').html(ret);
							$('#popViewDetail').modal('show');
							}
		});
		
  		return false;
    });

    // removeid
    function removeValue(list, value) {
		if( list.indexOf(','+value+',') != -1 ){
		return list.replace(new RegExp(',?'+ value + ',?'), ',');
		}
		else{
		return list.replace(new RegExp(',?'+ value + ',?'), "")
		}
	}

    $(document).on('click','.remove-data',function(){
		var id_event  = $("#id0").val();
		var id_remove = $(this).attr('data-id');
		var arr_id    = $("#idGallery-value").text();
		var new_id    = removeValue(arr_id,id_remove);
    	$("#idGallery-value").text(new_id);
    	$.ajax({
			url         : base_url+'apps/news/show_images_AlbumGallery_to_remove',
			type		: 'POST',
			data		: 'id_gallery='+new_id+'&id_event='+id_event,
			error 		: function(err){},
			success 	: function(ret){
							$('#popViewDetail').modal('hide');
							$('[data-id=' + id_remove + ']').css('background-color', 'red').remove();
							}
		});
  		return false;
    });

    $(window).load(function() {
    	var id_album  = $("#gallery_album0").val();
    	if (id_album != ''){
		$.ajax({
			url         : base_url+'apps/news/show_images_AlbumGallery_add',
			type		: 'POST',
			data		: 'id_album='+id_album,
			error 		: function(err){},
			success 	: function(ret){
							$('#imageSaveAlbum').html(ret);
							$('#idGallery-value').html(id_album);
							}
		});

    	} 
  		return false;
	});

	$(document).ready(function(){

	$(document).on('click','#addImagesServer',function(){
		$('#list-image').html("<i class='fa fa-spinner fa-spin'></i> Loading...");
		$('#myModal').modal('show');
		var id = $(this).attr('id');
		$('#myModal').attr('data-image-id',id);
		$('#myModal').removeAttr('data-is-ckeditor');
		$.ajax({
			url         : base_url+"apps/gallery/imagemanager",
			type        : "POST",
			error		: function (a,b,c) {
							alert('error loading image');
						},
			success     : function(ret){
							$('#list-image').html(ret);
			}
		});
	})
	});
</script>
{gallery_images_modal}
{filemanager_config}
<script src="{base_url}assets/js/custom-file-input.js"></script>

{multiple_image_script}