function the_grid(e,t,n,r,s,o){function u(r){var s;var u;var a="";var f=$("#"+r+" span").attr("class");var l=f=="ui-icon ui-icon-carat-1-s"?"asc":"desc";var c=f=="ui-icon ui-icon-carat-1-s"?"ui-icon ui-icon-carat-1-n":"ui-icon ui-icon-carat-1-s";$(e+" thead tr").find("span").removeClass("sort ui-icon-carat-1-s ui-icon ui-icon-carat-1-n");$("#"+r+" span").addClass(c);$(e).find(".cari").each(function(){search_data_id=$(this).attr("id").split("&");search_data_val=$(this).val();for(i=0;i<search_data_id.length;++i){s=search_data_val;u=search_data_id[i];a+="&"+u+"="+s}});a+="&perpage="+n+"&sort_field="+r+"&sort_type="+l;d(t+"/"+o+"?page="+o+a)}function a(){var r;var s;var o;var u;var a="";$(e).find(".cari").each(function(){search_data_id=$(this).attr("id").split("&");search_data_val=$(this).val();for(i=0;i<search_data_id.length;++i){s_val=search_data_val;s_field=search_data_id[i];a+="&"+s_field+"="+s_val}});sort_field=l();sort_type=c();a+="&perpage="+n+"&sort_field="+sort_field+"&sort_type="+sort_type;d(t+"?&page=0"+a)}function l(){var t="";var n="";var i="";$(e+" thead tr th").each(function(){if($(this).attr("title")=="Sort"){t=$(this).attr("id");$(this).find("span").each(function(){n=$(this).attr("class");if(n=="ui-icon ui-icon-carat-1-s"||n=="ui-icon ui-icon-carat-1-n"){i=t}})}});return i?i:r}function c(){var t="";var n="";var r="";$(e+" thead tr th").each(function(){if($(this).attr("title")=="Sort"){t=$(this).attr("id");$(this).find("span").each(function(){n=$(this).attr("class");if(n=="ui-icon ui-icon-carat-1-s"){r="desc"}else if(n=="ui-icon ui-icon-carat-1-n"){r="asc"}})}});return r?r:s}function h(){$(".pagination ul li a").click(function(){var t=$(this).attr("href");var r="";if(t){$(e).find(".cari").each(function(){s_val=$(this).val();s_field=$(this).attr("id");r+="&"+s_field+"="+s_val});var i=$(this).attr("href").split("/");var s=i.pop();s=s?s:0;sort_field=l();sort_type=c();var o=t+"?page="+s+"&perpage="+n+"&sort_field="+sort_field+"&sort_type="+sort_type+r;d(o)}return false})}function d(t){$(e+" tbody").html('<tr><td colspan="100" class="center"><br>'+loadingBtn+"</br></br></td></tr>");if(p){p.abort()}p=$.ajax({url:t+"&"+Math.random(),error:function(t){var n=t.status+" "+t.statusText;if(t.statusText!="abort"){$(e+" tbody").html('<tr><td colspan="100" class="center"><br>Error!</br>'+n+"</br></br></td></tr>");console.log(t)}},success:function(t){$(e+" tbody").html(t);$(e+" table tbody tr.footer td").append('<select class="perpage span2"> 							<optgroup label="Show per page"> 								<option value="5">5</option>								<option value="10">10</option> 								<option value="50">50</option>								<option value="100">100</option>							</optgroup>						</select>');$(".perpage").val(n);h(e,n);auth_system(ai,au,ad,im);$(e+" .perpage").change(function(){n=$(this).val();u(r)});$(".hapus").click(function(){var e=$(this).attr("id");var t=$(this).attr("data-url-rm");if(confirm("Hapus Data ?")){$.ajax({url:this_controller+t,data:"iddel="+e,type:"POST",success:function(e){u(r);notify("Data berhasil dihapus","success")}})}});$(".perpage").select2()}})}e=e?"#"+e:"#myGrid";n=n?n:10;o=o?o:0;r=r?r:"a.id";s=s?s:"desc";default_perpage=n;$(e+" thead tr th").click(function(){var e=$(this).attr("id");var t=$(this).attr("title");if(t!="Sort")return false;u(e)});$(e+" thead tr").find("th").each(function(){if($(this).attr("title")=="Sort"){$(this).addClass("sort")}});$(e).find(".cari").val("");$(".cari").keypress(function(e){if(e.which==13){a()}});$("[id^='filter_data']").click(function(){a()});$("select.cari").change(function(){a()});var f;$(".cari").on("keyup",function(e){clearTimeout(f);var t=500;var n=this.value;f=setTimeout(function(){a()},t)});$(document).on("click",".ui-datepicker-close",function(){a()});var p;u(r);$(e+" .perpage").val(default_perpage);$(".toggle_filter").click(function(){$("#filters").toggle("blind",{},500)})}$(function(){$("body").find(".my_grid").each(function(){var e=$(this);var t=e.attr("id");var n=e.attr("data-url");var r=e.attr("data-perpage")||10;var i=e.attr("data-order-id")||"a.id";var s=e.attr("data-order-direction")||"desc";the_grid(t,n,r,i,s)})})